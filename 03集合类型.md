太好了 🎯
你现在要学的是 **Dart 的集合类型（Collection Types）**：
包括最常用的三大核心结构：

> 📘 `List`（列表）
> 📗 `Map`（映射 / 键值对）
> 📙 `Set`（集合 / 不重复元素）

这些在 **Flutter 状态管理、JSON 数据、网络请求结果处理** 中都会频繁用到。
下面是最详细的使用大全 + 实例讲解。

---

# 🧮 一、List（列表 / 数组）

`List` 就是 Dart 中的数组，用来存放**有序元素**，可以重复。

---

## ✅ 1. 定义与创建

```dart
// 普通列表
List<int> nums = [1, 2, 3, 4];

// 动态类型列表（可以存放不同类型）
var mixed = [1, 'a', true];

// 空列表
var empty = <String>[];

// 不可修改的常量列表
const fixed = [10, 20, 30];
```

---

## ✅ 2. 访问与修改元素

```dart
print(nums[0]);  // 访问第一个元素 -> 1
nums[1] = 100;   // 修改
print(nums);     // [1, 100, 3, 4]
```

---

## ✅ 3. 添加与删除元素

```dart
nums.add(5);             // 添加单个元素
nums.addAll([6, 7, 8]);  // 添加多个
nums.insert(0, 0);       // 指定位置插入
nums.remove(3);          // 删除某值（按值）
nums.removeAt(2);        // 按下标删除
nums.removeLast();       // 删除最后一个
nums.clear();            // 清空
```

---

## ✅ 4. 遍历列表

```dart
var list = ['A', 'B', 'C'];

// for 循环
for (var i = 0; i < list.length; i++) {
  print(list[i]);
}

// for-in
for (var item in list) {
  print(item);
}

// forEach
list.forEach((item) => print(item));
```

---

## ✅ 5. 查找与判断

```dart
print(list.contains('A')); // 是否包含 -> true
print(list.indexOf('B'));  // 查找索引 -> 1
print(list.isEmpty);       // 是否为空
print(list.length);        // 长度
```

---

## ✅ 6. 常用高级方法

```dart
var nums = [1, 2, 3, 4, 5];

print(nums.first);     // 1
print(nums.last);      // 5
print(nums.reversed);  // (5,4,3,2,1)

var doubleList = nums.map((n) => n * 2).toList();  // [2,4,6,8,10]
var even = nums.where((n) => n % 2 == 0).toList(); // [2,4]
print(nums.reduce((a, b) => a + b));               // 求和 15
print(nums.any((n) => n > 3));                     // 有大于3的？true
print(nums.every((n) => n > 0));                   // 所有都大于0？true
```

---

## ✅ 7. 扩展操作

```dart
var a = [1, 2];
var b = [3, 4];
var merged = [...a, ...b]; // 扩展操作符 -> [1,2,3,4]
```

---

## ✅ 8. 条件拼接（Flutter 常见）

```dart
var showExtra = true;
var items = ['A', 'B', if (showExtra) 'C']; // 条件元素
print(items); // [A, B, C]
```

---

## ✅ 9. 循环生成列表

```dart
var squares = [for (var i = 1; i <= 5; i++) i * i];
print(squares); // [1,4,9,16,25]
```

---

# 🗺️ 二、Map（映射 / 键值对）

`Map` 就像 JavaScript 的对象，用于存储 **key-value** 形式的数据。

---

## ✅ 1. 定义与创建

```dart
Map<String, int> scores = {
  'Tom': 90,
  'Jerry': 85,
};

// 动态类型 Map
var user = {'name': 'Alice', 'age': 20};

// 空 Map
var empty = <String, dynamic>{};
```

---

## ✅ 2. 访问与修改

```dart
print(scores['Tom']);     // 访问键 -> 90
scores['Jerry'] = 95;     // 修改值
scores['Mike'] = 88;      // 新增键值对
print(scores);
```

---

## ✅ 3. 删除与清空

```dart
scores.remove('Tom');     // 删除键
scores.clear();           // 清空
```

---

## ✅ 4. 遍历 Map

```dart
var user = {'name': 'Bob', 'age': 25};

// 遍历键
for (var key in user.keys) {
  print(key);
}

// 遍历值
for (var value in user.values) {
  print(value);
}

// 遍历键值对
user.forEach((k, v) => print('$k: $v'));
```

---

## ✅ 5. 常用方法

```dart
var person = {'name': 'Lucy', 'age': 18};
print(person.containsKey('name')); // true
print(person.containsValue(18));   // true
print(person.isEmpty);             // false
print(person.length);              // 2
```

---

## ✅ 6. 合并与更新

```dart
var a = {'a': 1, 'b': 2};
var b = {'b': 3, 'c': 4};

a.addAll(b); // 合并
print(a); // {a: 1, b: 3, c: 4}

a.update('b', (old) => old + 10); // 更新已有键
a.putIfAbsent('d', () => 99);     // 若不存在则添加
```

---

## ✅ 7. 从列表转 Map（常用于 JSON）

```dart
var keys = ['a', 'b', 'c'];
var values = [1, 2, 3];
var map = Map.fromIterables(keys, values);
print(map); // {a:1, b:2, c:3}
```

---

## ✅ 8. 嵌套 Map（常用于配置/JSON）

```dart
var student = {
  'name': 'Tom',
  'info': {
    'age': 20,
    'major': 'Computer Science'
  }
};

print(student['info']?['major']); // Computer Science
```

---

# 🧩 三、Set（集合）

`Set` 是一种**无序、唯一**的数据集合（不会包含重复元素）。

---

## ✅ 1. 定义与创建

```dart
Set<int> numbers = {1, 2, 3, 3, 4};
print(numbers); // {1, 2, 3, 4}

var empty = <String>{};  // 空集合
```

---

## ✅ 2. 添加与删除

```dart
numbers.add(5);
numbers.addAll([6, 7, 8]);
numbers.remove(3);
print(numbers);
```

---

## ✅ 3. 判断与操作

```dart
print(numbers.contains(2)); // 是否包含
print(numbers.length);
print(numbers.isEmpty);
```

---

## ✅ 4. 集合运算（🔥 非常常用）

```dart
var a = {1, 2, 3};
var b = {3, 4, 5};

print(a.union(b));        // 并集 -> {1,2,3,4,5}
print(a.intersection(b)); // 交集 -> {3}
print(a.difference(b));   // 差集 -> {1,2}
```

---

## ✅ 5. 转换操作

```dart
var list = [1, 2, 2, 3, 3, 3];
var set = list.toSet(); // 去重
print(set); // {1,2,3}

var backToList = set.toList();
```

---

# 🌈 四、综合练习：集合综合应用

```dart
void main() {
  // 1️⃣ List
  var fruits = ['apple', 'banana', 'pear'];
  fruits.add('orange');
  fruits.remove('banana');

  // 2️⃣ Map
  var prices = {'apple': 3, 'pear': 5, 'orange': 4};
  prices['banana'] = 2;

  // 3️⃣ Set
  var cart = {'apple', 'pear', 'apple'};
  print(cart); // {apple, pear}

  // 计算总价
  var total = 0;
  for (var fruit in cart) {
    total += prices[fruit] ?? 0;
  }
  print('总价：$total 元');
}
```

输出结果：

```
{apple, pear}
总价：8 元
```

---

# 📘 五、集合类型总结表

| 类型     | 关键类   | 是否有序                 | 是否可重复    | 常用方法                                                 |
| ------ | ----- | -------------------- | -------- | ---------------------------------------------------- |
| `List` | 有序列表  | ✅ 是                  | ✅ 是      | `add()`, `remove()`, `map()`, `where()`              |
| `Map`  | 键值对   | ❌ 否（从 Dart 2.0 开始保序） | ✅ key 唯一 | `addAll()`, `remove()`, `update()`, `forEach()`      |
| `Set`  | 不重复集合 | ❌ 无序                 | ❌ 否      | `add()`, `union()`, `intersection()`, `difference()` |

---

是否希望我接下来继续整理
👉 **Dart 函数与闭包使用大全**（包括箭头函数、匿名函数、可选参数、命名参数、返回函数）？
这一节非常重要，尤其是写 Flutter 时。
