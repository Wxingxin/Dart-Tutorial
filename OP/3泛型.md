å¤ªå¥½äº† ğŸ‘ æˆ‘æ¥ç»™ä½ ç³»ç»Ÿè®²è§£ä¸€ä¸‹ **Dart ä¸­ç±»ï¼ˆclassï¼‰é‡Œæ³›å‹ï¼ˆGenericsï¼‰çš„ä½¿ç”¨**ï¼Œæˆ‘ä»¬ä¼šä» **æœ€ç®€å•çš„æ¦‚å¿µå¼€å§‹**ï¼Œå†é…ä¸Š **ç»å…¸+å®æˆ˜æ¡ˆä¾‹**ï¼Œä¿è¯ä½ ä¸€çœ‹å°±ä¼šã€‚

---

## ğŸ§  ä¸€ã€ä»€ä¹ˆæ˜¯æ³›å‹ï¼ˆGenericsï¼‰

> æ³›å‹å°±æ˜¯ï¼šè®© **ç±»ã€æ–¹æ³•ã€æ¥å£** èƒ½é€‚é… **å¤šç§ç±»å‹çš„æ•°æ®**ï¼Œè€Œä¸ç”¨é‡å¤å†™ç›¸åŒçš„é€»è¾‘ã€‚

æ¯”å¦‚ï¼š

* ä½ æœ‰ä¸€ä¸ªä¿å­˜æ•°æ®çš„ç±»ï¼›
* ä½ å¯èƒ½æƒ³ä¿å­˜ `int`ã€`String`ã€`double` ç±»å‹ï¼›
* æ³›å‹å°±èƒ½è®©ä½ å†™ **ä¸€ä»½ä»£ç **ï¼Œé€‚é… **å¤šç§ç±»å‹**ã€‚

---

## ğŸ§© äºŒã€æœ€ç®€å•çš„æ³›å‹ç±»

```dart
// å®šä¹‰ä¸€ä¸ªæ³›å‹ç±»
class Box<T> {
  T content; // T è¡¨ç¤ºç±»å‹å‚æ•°
  Box(this.content);

  void showContent() {
    print("ç›’å­é‡Œè£…çš„æ˜¯: $content");
  }
}

void main() {
  var box1 = Box<int>(123); // T = int
  var box2 = Box<String>("Dart"); // T = String
  var box3 = Box<double>(3.14); // T = double

  box1.showContent(); // è¾“å‡º: ç›’å­é‡Œè£…çš„æ˜¯: 123
  box2.showContent(); // è¾“å‡º: ç›’å­é‡Œè£…çš„æ˜¯: Dart
  box3.showContent(); // è¾“å‡º: ç›’å­é‡Œè£…çš„æ˜¯: 3.14
}
```

ğŸ§© **è§£é‡Šï¼š**

* `<T>` æ˜¯æ³›å‹å‚æ•°ï¼Œæ„æ€æ˜¯â€œæˆ‘è¿˜ä¸çŸ¥é“ä½ è¦ä¼ ä»€ä¹ˆç±»å‹â€ï¼›
* åˆ›å»ºå¯¹è±¡æ—¶ï¼Œ`Box<int>` è¡¨ç¤ºè¿™ä¸ªç›’å­é‡Œåªèƒ½è£… `int`ï¼›
* æ³›å‹è®©ç±»å¯ä»¥ **å¤ç”¨é€»è¾‘**ï¼Œé¿å…é‡å¤å†™ä»£ç ã€‚

---

## ğŸ¯ ä¸‰ã€å¤šä¸ªæ³›å‹å‚æ•°

æœ‰æ—¶å€™ä¸€ä¸ªç±»éœ€è¦ä¸¤ä¸ªæˆ–å¤šä¸ªæ³›å‹ï¼š

```dart
class Pair<K, V> {
  K key;
  V value;

  Pair(this.key, this.value);

  void showPair() {
    print("é”®: $key, å€¼: $value");
  }
}

void main() {
  var p1 = Pair<String, int>("å¹´é¾„", 20);
  var p2 = Pair<int, String>(1, "å¼ ä¸‰");

  p1.showPair(); // é”®: å¹´é¾„, å€¼: 20
  p2.showPair(); // é”®: 1, å€¼: å¼ ä¸‰
}
```

ğŸ§  å¸¸è§äºï¼š

* Mapï¼ˆé”®å€¼å¯¹ï¼‰
* æ•°æ®åº“è®°å½•å¯¹è±¡ï¼ˆID + æ•°æ®ï¼‰

---

## âš™ï¸ å››ã€æ³›å‹ + ç»§æ‰¿ï¼ˆextends é™åˆ¶ç±»å‹ï¼‰

æœ‰æ—¶ä½ å¸Œæœ›æ³›å‹åªèƒ½æ¥å— **æŸäº›ç±»å‹**ã€‚

```dart
class Animal {
  void speak() => print("åŠ¨ç‰©å«");
}

class Dog extends Animal {
  @override
  void speak() => print("æ±ªæ±ªæ±ª");
}

class Cat extends Animal {
  @override
  void speak() => print("å–µå–µå–µ");
}

// åªå…è®¸ä¼ å…¥ç»§æ‰¿è‡ª Animal çš„ç±»å‹
class Zoo<T extends Animal> {
  List<T> animals = [];

  void addAnimal(T animal) {
    animals.add(animal);
  }

  void soundAll() {
    for (var a in animals) {
      a.speak();
    }
  }
}

void main() {
  var zoo = Zoo<Dog>(); // âœ… Dog ç»§æ‰¿è‡ª Animal
  zoo.addAnimal(Dog());
  zoo.soundAll(); // è¾“å‡º: æ±ªæ±ªæ±ª

  // var zoo2 = Zoo<String>(); âŒ é”™è¯¯ï¼ŒString ä¸æ˜¯ Animal
}
```

ğŸ¦ **è§£é‡Šï¼š**

* `<T extends Animal>` é™åˆ¶ T å¿…é¡»æ˜¯ `Animal` çš„å­ç±»ï¼›
* è¿™æ ·åœ¨ç±»é‡Œå°±å¯ä»¥å®‰å…¨åœ°ä½¿ç”¨ `Animal` çš„æ–¹æ³•ã€‚

---

## ğŸ§° äº”ã€æ³›å‹æ–¹æ³•ï¼ˆGeneric Functionï¼‰

ä¸ä»…ç±»èƒ½æ³›å‹ï¼Œæ–¹æ³•ä¹Ÿå¯ä»¥ä½¿ç”¨æ³›å‹ï¼š

```dart
T getFirst<T>(List<T> items) {
  return items.first;
}

void main() {
  print(getFirst<int>([1, 2, 3]));       // è¾“å‡º: 1
  print(getFirst<String>(["A", "B"]));   // è¾“å‡º: A
}
```

ğŸ§  æ³›å‹æ–¹æ³•å¯ä»¥ç‹¬ç«‹ä½¿ç”¨ï¼Œä¸ä¸€å®šè¦å®šä¹‰åœ¨ç±»é‡Œã€‚

---

## ğŸ“¦ å…­ã€æ³›å‹ + å®æˆ˜ï¼šç¼“å­˜ç®¡ç†ç±»ï¼ˆCacheï¼‰

ä¸‹é¢æ˜¯ä¸€ä¸ª **å®é™…å¼€å‘ä¸­ä¼šç”¨åˆ°çš„ç»å…¸ä¾‹å­** ğŸ‘‡

```dart
class Cache<T> {
  final Map<String, T> _cache = {};

  void setItem(String key, T value) {
    _cache[key] = value;
  }

  T? getItem(String key) {
    return _cache[key];
  }
}

void main() {
  // ä¿å­˜å­—ç¬¦ä¸²ç¼“å­˜
  var stringCache = Cache<String>();
  stringCache.setItem("name", "Dart");
  print(stringCache.getItem("name")); // è¾“å‡º: Dart

  // ä¿å­˜æ•°å­—ç¼“å­˜
  var intCache = Cache<int>();
  intCache.setItem("score", 100);
  print(intCache.getItem("score")); // è¾“å‡º: 100
}
```

ğŸ’¡ **å®æˆ˜å¯ç¤ºï¼š**

* æ³›å‹è®©æˆ‘ä»¬å†™ä¸€ä¸ªé€šç”¨ç¼“å­˜ç±»ï¼›
* æ— è®ºæ˜¯ `int`ã€`String` è¿˜æ˜¯ `è‡ªå®šä¹‰å¯¹è±¡`ï¼Œéƒ½èƒ½å®‰å…¨å­˜å–ï¼›
* åœ¨ Flutterã€æœåŠ¡ç«¯ Dart å¼€å‘ä¸­å¸¸ç”¨ã€‚

---

## ğŸ’¬ ä¸ƒã€æ³›å‹ + è‡ªå®šä¹‰å¯¹è±¡å®æˆ˜

```dart
class User {
  String name;
  int age;
  User(this.name, this.age);
}

class Repository<T> {
  final List<T> _data = [];

  void add(T item) => _data.add(item);
  void showAll() => _data.forEach((item) => print(item));
}

void main() {
  var userRepo = Repository<User>();
  userRepo.add(User("å¼ ä¸‰", 20));
  userRepo.add(User("æå››", 22));

  userRepo.showAll(); // è¾“å‡º: Instance of 'User'...
}
```

ğŸ“˜ æ”¹è¿›ï¼š

```dart
class User {
  String name;
  int age;
  User(this.name, this.age);

  @override
  String toString() => "User(name: $name, age: $age)";
}
```

è¾“å‡ºï¼š

```
User(name: å¼ ä¸‰, age: 20)
User(name: æå››, age: 22)
```

---

## ğŸš€ å…«ã€æ€»ç»“è¡¨æ ¼

| ç±»å‹   | å®šä¹‰å½¢å¼                     | è¯´æ˜         | ç¤ºä¾‹                    |
| ---- | ------------------------ | ---------- | --------------------- |
| æ³›å‹ç±»  | `class Box<T>`           | å®šä¹‰æ”¯æŒå¤šç§ç±»å‹çš„ç±» | `Box<int>`            |
| å¤šæ³›å‹  | `class Pair<K,V>`        | æ”¯æŒä¸¤ä¸ªç±»å‹å‚æ•°   | `Pair<String,int>`    |
| æ³›å‹çº¦æŸ | `<T extends Animal>`     | é™åˆ¶ç±»å‹èŒƒå›´     | `Zoo<Dog>`            |
| æ³›å‹æ–¹æ³• | `T getFirst<T>(List<T>)` | æ–¹æ³•æ”¯æŒå¤šç±»å‹    | `getFirst<int>(list)` |

---

æ˜¯å¦å¸Œæœ›æˆ‘æ¥ç€ç»™ä½ è®²è®² **Dart æ³›å‹åœ¨å‡½æ•°å’Œæ¥å£ä¸­çš„é«˜çº§ç”¨æ³•ï¼ˆå¦‚æ³›å‹æ¥å£ã€æ³›å‹å·¥å‚ã€æ³›å‹ mixinï¼‰**ï¼Ÿ
è¿™äº›æ˜¯ Dart é¢è¯•é¢˜å¸¸è€ƒçš„éƒ¨åˆ†ï¼Œä¹Ÿèƒ½å¸®ä½ ä»å°ç™½è¿›é˜¶åˆ°è¿›é˜¶å¼€å‘è€…ã€‚
