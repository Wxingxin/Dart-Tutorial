下面是 **「错误与异常（Errors & Exceptions）」知识点大全（偏向基础，含经典示例）**，适合初学者系统理解 Dart/JS/TS 等语言中异常机制的核心概念。

---

## 🧩 一、为什么要有错误与异常机制？

在程序执行过程中，可能会出现各种不可预料的情况（比如文件不存在、网络请求失败、类型错误等）。
异常机制让程序可以**优雅地处理这些错误**，而不是直接崩溃。

---

## 🧱 二、错误与异常的区别

| 名称          | 含义                  | 是否可恢复  | 示例           |
| ----------- | ------------------- | ------ | ------------ |
| `Error`     | 程序或系统级错误（通常是程序逻辑问题） | ❌ 不可恢复 | 内存溢出、空指针、栈溢出 |
| `Exception` | 程序运行时出现的异常（可预料的问题）  | ✅ 可恢复  | 文件不存在、网络超时   |

📌 **简单理解**：

* `Error` 通常是**程序 bug**；
* `Exception` 是**正常的异常情况**。

---

## ⚙️ 三、`throw` —— 抛出异常

用于**主动抛出**一个异常，让上层代码决定如何处理。

```dart
void checkAge(int age) {
  if (age < 18) {
    throw Exception('未满 18 岁，禁止访问');
  }
  print('欢迎进入系统');
}

void main() {
  checkAge(15);
}
```

💡 执行结果：

```
Unhandled exception:
Exception: 未满 18 岁，禁止访问
```

---

## 🪂 四、`try` / `catch` —— 捕获异常

用来**捕获并处理**程序运行时的异常。

```dart
void main() {
  try {
    int result = 10 ~/ 0;  // 除以零异常
    print(result);
  } catch (e) {
    print('捕获到异常：$e');
  }
}
```

输出：

```
捕获到异常：IntegerDivisionByZeroException
```

---

## 🎯 五、`on` —— 指定异常类型捕获

可以只捕获**特定类型**的异常。

```dart
void main() {
  try {
    int result = 10 ~/ 0;
  } on IntegerDivisionByZeroException {
    print('不能除以 0');
  } catch (e) {
    print('未知异常：$e');
  }
}
```

---

## 🧰 六、`finally` —— 无论是否发生异常都会执行

常用于资源清理（关闭文件、释放网络连接等）。

```dart
void main() {
  try {
    int result = 10 ~/ 0;
  } catch (e) {
    print('捕获异常：$e');
  } finally {
    print('程序结束，释放资源');
  }
}
```

输出：

```
捕获异常：IntegerDivisionByZeroException
程序结束，释放资源
```

---

## 🔁 七、`rethrow` —— 重新抛出异常

在捕获异常后，可能需要**继续上抛**给更高层的调用者。

```dart
void func1() {
  try {
    int result = 10 ~/ 0;
  } catch (e) {
    print('func1 捕获异常：$e');
    rethrow; // 重新抛出异常
  }
}

void main() {
  try {
    func1();
  } catch (e) {
    print('main 处理异常：$e');
  }
}
```

输出：

```
func1 捕获异常：IntegerDivisionByZeroException
main 处理异常：IntegerDivisionByZeroException
```

---

## 🧠 八、常见异常类型（Dart 示例）

| 异常类型                             | 含义              |
| -------------------------------- | --------------- |
| `FormatException`                | 格式错误（例如解析字符串失败） |
| `IntegerDivisionByZeroException` | 整数除以零           |
| `FileSystemException`            | 文件系统错误          |
| `TimeoutException`               | 超时错误            |
| `SocketException`                | 网络错误            |

示例：

```dart
void main() {
  try {
    var num = int.parse('abc'); // 格式错误
  } on FormatException catch (e) {
    print('格式错误：$e');
  }
}
```

---

## 🧩 九、异步异常处理

在 `Future` 中，使用 `.catchError()` 或 `try/await`。

```dart
Future<void> fetchData() async {
  throw Exception('网络错误');
}

void main() async {
  try {
    await fetchData();
  } catch (e) {
    print('捕获异步异常：$e');
  }
}
```

---

## 🪄 十、最佳实践

✅ 只在必要时使用 `try/catch`（过多会影响性能）
✅ 明确区分可预期异常和逻辑错误
✅ 用 `finally` 做资源清理
✅ 对外层函数用 `rethrow` 保留异常信息

---

是否希望我接下来帮你写一份类似结构的：

> 「**Dart/JS 异步编程（Future / Promise）知识点大全（偏向基础 + 经典代码）**」？
> 我可以紧接着为你整理出来。
