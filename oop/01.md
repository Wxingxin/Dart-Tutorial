非常棒 💪
你现在进入 Dart 面向对象编程（OOP）阶段，这是学习 Flutter 的核心基础之一。
这份教程我会 **系统 + 详细 + 案例驱动** 带你掌握 Dart 的所有类与对象特性。
内容分为四大部分👇

---

# 🧱 一、类与对象（Classes & Objects）

---

## ✅ 1️⃣ 定义类与创建对象

使用 `class` 关键字定义类，用 `new`（可省略）创建实例。

```dart
class Person {
  // 属性（Fields）
  String name;
  int age;

  // 方法（Methods）
  void sayHello() {
    print('你好，我是 $name，今年 $age 岁');
  }
}

void main() {
  var p = Person();  // 创建实例（new 可省略）
  p.name = '张三';
  p.age = 20;
  p.sayHello(); // 输出：你好，我是 张三，今年 20 岁
}
```

---

# 🏗️ 二、构造函数（Constructors）

---

Dart 提供多种构造函数，灵活又强大。

---

## ✅ 1️⃣ 默认构造函数

```dart
class Person {
  String name;
  int age;

  // 默认构造函数
  Person(this.name, this.age);
}

void main() {
  var p = Person('李四', 25);
  print('${p.name} - ${p.age}');
}
```

> 💡 `this.name` 是简写形式，等价于：
>
> ```dart
> Person(String name, int age) {
>   this.name = name;
>   this.age = age;
> }
> ```

---

## ✅ 2️⃣ 命名构造函数

> 用于创建多种构造方式，比如从 JSON 初始化对象。

```dart
class Person {
  String name;
  int age;

  Person(this.name, this.age);

  // 命名构造函数
  Person.fromJSON(Map<String, dynamic> json)
      : name = json['name'],
        age = json['age'];
}

void main() {
  var json = {'name': '王五', 'age': 30};
  var p = Person.fromJSON(json);
  print('${p.name} - ${p.age}'); // 王五 - 30
}
```

---

## ✅ 3️⃣ 工厂构造函数（factory）

> `factory` 构造函数不会总是创建新实例，常用于 **单例模式**。

```dart
class Logger {
  static final Logger _instance = Logger._internal();

  factory Logger() {
    return _instance; // 总是返回同一个实例
  }

  Logger._internal(); // 私有命名构造函数

  void log(String msg) => print('Log: $msg');
}

void main() {
  var a = Logger();
  var b = Logger();
  print(identical(a, b)); // true
}
```

---

## ✅ 4️⃣ 常量构造函数（const）

> `const` 对象在编译时创建，不可变。

```dart
class Point {
  final int x;
  final int y;

  const Point(this.x, this.y);
}

void main() {
  const p1 = Point(1, 2);
  const p2 = Point(1, 2);
  print(identical(p1, p2)); // true（同一个编译时常量）
}
```

---

## ✅ 5️⃣ 初始化列表（Initializer List）

> 在构造函数体执行前初始化属性。

```dart
class Rectangle {
  final int width;
  final int height;
  final int area;

  Rectangle(this.width, this.height) : area = width * height;
}

void main() {
  var r = Rectangle(4, 5);
  print(r.area); // 20
}
```

---

# 🧩 三、核心 OOP 概念

---

## 🧱 1️⃣ 封装（Encapsulation）

Dart 没有 `public` / `private` 关键字，
但以下划线 `_` 开头表示 **库私有（library private）**。

```dart
class Account {
  String _password = '123456'; // 私有属性

  // Getter
  String get password => _password;

  // Setter
  set password(String value) {
    if (value.length >= 6) {
      _password = value;
    } else {
      print('密码太短');
    }
  }
}

void main() {
  var acc = Account();
  print(acc.password);
  acc.password = 'abc'; // 密码太短
}
```

---

## 🧬 2️⃣ 继承（Inheritance）

使用 `extends` 实现继承。

```dart
class Animal {
  void speak() => print('动物发出声音');
}

class Dog extends Animal {
  @override
  void speak() => print('汪汪汪');
}

void main() {
  var d = Dog();
  d.speak(); // 汪汪汪
}
```

### 使用 `super` 调用父类方法或构造函数

```dart
class Animal {
  String name;
  Animal(this.name);

  void move() => print('$name 在移动');
}

class Bird extends Animal {
  Bird(String name) : super(name); // 调用父类构造函数

  @override
  void move() {
    super.move(); // 调用父类方法
    print('$name 在飞');
  }
}

void main() {
  var b = Bird('麻雀');
  b.move();
}
```

---

## 🧠 3️⃣ 抽象（Abstraction）

### 抽象类：`abstract class`

```dart
abstract class Shape {
  void draw(); // 抽象方法
}

class Circle extends Shape {
  @override
  void draw() => print('画圆形');
}

void main() {
  Shape s = Circle();
  s.draw();
}
```

> 💡 抽象类不能被实例化，只能被继承。

---

## 🧩 4️⃣ 接口（Interfaces）

Dart 中没有 `interface` 关键字，
每个类 **天然定义了一个接口**。
使用 `implements` 实现接口（必须重写所有方法）。

```dart
class Logger {
  void log(String msg) => print('log: $msg');
}

class FileLogger implements Logger {
  @override
  void log(String msg) => print('写入文件: $msg');
}

void main() {
  var logger = FileLogger();
  logger.log('测试');
}
```

---

# 🧬 四、Dart 特色 OOP 机制

---

## ⚙️ 1️⃣ Mixins（混入）

> Mixin 是一种“代码复用机制”，类似多继承，但更安全。

```dart
mixin Fly {
  void fly() => print('我能飞');
}

mixin Swim {
  void swim() => print('我能游泳');
}

class Animal {}

class Duck extends Animal with Fly, Swim {}

void main() {
  var duck = Duck();
  duck.fly();
  duck.swim();
}
```

### 限制使用范围（on）

```dart
class Animal {}

mixin Fly on Animal {
  void fly() => print('动物才能飞');
}

class Bird extends Animal with Fly {}

void main() {
  var b = Bird();
  b.fly();
}
```

---

## 🎯 2️⃣ 枚举（Enums）

> Dart 2.17+ 支持增强型枚举，可添加字段与方法。

```dart
enum Color {
  red(1),
  green(2),
  blue(3);

  final int code;
  const Color(this.code);

  void describe() => print('颜色码: $code');
}

void main() {
  var c = Color.red;
  print(c.name); // red
  c.describe(); // 颜色码: 1
}
```

---

## 🧩 3️⃣ 扩展方法（Extension Methods）

> 为已有类添加新功能（即使你不能修改它）。

```dart
extension StringExtension on String {
  bool get isEmail => contains('@');
  String capitalize() => this[0].toUpperCase() + substring(1);
}

void main() {
  var email = 'test@example.com';
  print(email.isEmail); // true

  var name = 'dart';
  print(name.capitalize()); // Dart
}
```

---

# 📘 五、OOP 综合实战案例

---

## 🧠 案例：员工系统

```dart
abstract class Employee {
  String name;
  int age;

  Employee(this.name, this.age);

  void work();
}

mixin Report {
  void generateReport() => print('生成工作报告...');
}

class Developer extends Employee with Report {
  String language;

  Developer(String name, int age, this.language) : super(name, age);

  @override
  void work() => print('$name 在写 $language 代码');
}

class Manager extends Employee {
  Manager(String name, int age) : super(name, age);

  @override
  void work() => print('$name 在管理团队');
}

void main() {
  var dev = Developer('小李', 25, 'Dart');
  dev.work();
  dev.generateReport();

  var mgr = Manager('老王', 40);
  mgr.work();
}
```

输出：

```
小李 在写 Dart 代码
生成工作报告...
老王 在管理团队
```

---

# ✅ 六、总结表

| 特性              | 关键字               | 示例                            |
| --------------- | ----------------- | ----------------------------- |
| 类定义             | `class`           | `class Person {}`             |
| 继承              | `extends`         | `class Dog extends Animal`    |
| 抽象类             | `abstract`        | `abstract class Shape {}`     |
| 接口实现            | `implements`      | `class A implements B`        |
| 混入              | `mixin` / `with`  | `class C with MixinA, MixinB` |
| 命名构造函数          | `ClassName.xxx()` | `Person.fromJSON()`           |
| 工厂构造函数          | `factory`         | `factory Logger()`            |
| 常量构造函数          | `const`           | `const Point()`               |
| Getter / Setter | `get`, `set`      | `get name => _name;`          |
| 私有成员            | `_` 前缀            | `_age`                        |
| 扩展方法            | `extension`       | `extension on String {}`      |
| 枚举              | `enum`            | `enum Color { red, green }`   |

---

是否希望我接着写下一章 👉
**「Dart 泛型（Generics）+ 类中的类型参数 + 泛型约束 + 泛型函数」详细教程**？
这是 Dart OOP 的最后一块，也是 Flutter 架构中非常常用的一部分。
