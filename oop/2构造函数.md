# ğŸ’¯ğŸ’¯ğŸ’¯ ä¸€ã€æ„é€ å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨ Dart ä¸­ï¼Œ**æ„é€ å‡½æ•°ï¼ˆConstructorï¼‰** çš„ä½œç”¨å°±æ˜¯ï¼š

> âœ… å½“ä½ â€œåˆ›å»ºå¯¹è±¡â€çš„æ—¶å€™ï¼Œ**è‡ªåŠ¨æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ**ã€‚

---

### ğŸ§© ä¸¾ä¸ªä¾‹å­ï¼š

```dart
class Person {
  String name = 'æœªå‘½å';
  int age = 0;

  void sayHello() {
    print('ä½ å¥½ï¼Œæˆ‘æ˜¯$nameï¼Œä»Šå¹´$ageå²');
  }
}

void main() {
  var p = Person(); // åˆ›å»ºå¯¹è±¡
  p.sayHello();     // è¾“å‡ºï¼šä½ å¥½ï¼Œæˆ‘æ˜¯æœªå‘½åï¼Œä»Šå¹´0å²
}
```

è¿™é‡Œçš„ `Person()` å°±æ˜¯è°ƒç”¨äº† **æ„é€ å‡½æ•°**ã€‚
ä½†ä½ ä¼šå‘ç°ï¼šæˆ‘ä»¬**å¹¶æ²¡æœ‰å†™**ä»»ä½•æ„é€ å‡½æ•°ï¼Œå®ƒå´èƒ½æ­£å¸¸å·¥ä½œã€‚

---

# ğŸ’¯ğŸ’¯ğŸ’¯ é»˜è®¤æ„é€ å‡½æ•°

## Dart è‡ªåŠ¨æä¾›çš„â€œé»˜è®¤æ„é€ å‡½æ•°â€

å½“ä½ æ²¡æœ‰è‡ªå·±å®šä¹‰æ„é€ å‡½æ•°æ—¶ï¼ŒDart ä¼š**è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªæ— å‚æ•°çš„é»˜è®¤æ„é€ å‡½æ•°**ã€‚

å®ƒçš„å½¢å¼ç­‰ä»·äº ğŸ‘‡ï¼š

```dart
class Person {
  String name = 'æœªå‘½å';
  int age = 0;

  // Dart è‡ªåŠ¨å¸®ä½ åŠ ä¸Šè¿™ä¸ª â†“
  Person() {
    // ç©ºçš„ï¼Œæ²¡æœ‰å‚æ•°ï¼Œä¹Ÿæ²¡æœ‰æ“ä½œ
  }
}
```

ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªé»˜è®¤æ„é€ å‡½æ•°ï¼š

- åå­—å’Œç±»åç›¸åŒï¼ˆ`Person()`ï¼‰
- æ²¡æœ‰å‚æ•°
- ä»€ä¹ˆä¹Ÿä¸åšï¼ˆä¸åˆå§‹åŒ–é¢å¤–å†…å®¹ï¼‰
- ä¼šè¢« Dart è‡ªåŠ¨åˆ›å»º

---

## ğŸ§  ä¸‰ã€é»˜è®¤æ„é€ å‡½æ•°çš„ä½œç”¨ï¼ˆæ€»ç»“ï¼‰

| åŠŸèƒ½       | è¯´æ˜                                |
| ---------- | ----------------------------------- |
| åˆ›å»ºå¯¹è±¡   | ç”¨äºç”Ÿæˆç±»çš„å®ä¾‹ï¼ˆå¯¹è±¡ï¼‰            |
| åˆå§‹åŒ–å±æ€§ | è‹¥ç±»ä¸­æœ‰é»˜è®¤å€¼ï¼Œä¼šåœ¨æ„é€ æ—¶è®¾ç½®      |
| è‡ªåŠ¨è°ƒç”¨   | æ¯æ¬¡ `var p = Person();` æ—¶è‡ªåŠ¨è°ƒç”¨ |
| å¯æ›¿æ¢     | ä½ å¯ä»¥è‡ªå·±å®šä¹‰æ„é€ å‡½æ•°æ¥æ›¿æ¢é»˜è®¤çš„  |

---

## ğŸ§° å››ã€éªŒè¯é»˜è®¤æ„é€ å‡½æ•°çš„å­˜åœ¨

ä½ å¯ä»¥åŠ ä¸Š `print()` éªŒè¯å®ƒåœ¨è¿è¡Œæ—¶ä¼šè¢«æ‰§è¡Œ ğŸ‘‡

```dart
class Person {
  String name = 'å°æ˜';
  int age = 18;

  // æ˜¾å¼å†™å‡ºé»˜è®¤æ„é€ å‡½æ•°
  Person() {
    print('æ„é€ å‡½æ•°è¢«è°ƒç”¨');
  }
}

void main() {
  var p1 = Person(); // è¾“å‡ºï¼šæ„é€ å‡½æ•°è¢«è°ƒç”¨
  print('${p1.name} - ${p1.age}');
}
```

ğŸ“ è¾“å‡ºç»“æœï¼š

```
æ„é€ å‡½æ•°è¢«è°ƒç”¨
å°æ˜ - 18
```

è¯´æ˜ï¼šåœ¨åˆ›å»ºå¯¹è±¡çš„é‚£ä¸€åˆ»ï¼ŒDart è‡ªåŠ¨æ‰§è¡Œäº†æ„é€ å‡½æ•°ã€‚

---

# ğŸ’¯ğŸ’¯ğŸ’¯ å¸¦å‚æ•°æ„é€ å‡½æ•°

ä¸€æ—¦ä½ **è‡ªå·±å®šä¹‰äº†æ„é€ å‡½æ•°**ï¼Œ
Dart å°±ä¸ä¼šå†è‡ªåŠ¨ç”Ÿæˆé‚£ä¸ªâ€œé»˜è®¤æ„é€ å‡½æ•°â€ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š

```dart
class Person {
  String name;
  int age;

  // è‡ªå®šä¹‰æ„é€ å‡½æ•°
  Person(this.name, this.age);
}

void main() {
  var p = Person('å°çº¢', 20); // âœ… å¿…é¡»ä¼ å‚æ•°
  // var p2 = Person(); âŒ æŠ¥é”™ï¼šå› ä¸ºé»˜è®¤æ„é€ å‡½æ•°æ²¡äº†
}
```

ğŸ§  **é‡ç‚¹è®°å¿†ï¼š**

- Dart è‡ªåŠ¨æä¾›çš„â€œé»˜è®¤æ„é€ å‡½æ•°â€ä»…åœ¨ä½ **æ²¡æœ‰å®šä¹‰ä»»ä½•æ„é€ å‡½æ•°**æ—¶æ‰å­˜åœ¨ã€‚
- ä¸€æ—¦å®šä¹‰äº†è‡ªå·±çš„æ„é€ å‡½æ•°ï¼Œ**è‡ªåŠ¨çš„é‚£ä¸ªå°±ä¸å†ç”Ÿæˆ**ã€‚

---

## ğŸ¯ å°ç»“å¤ä¹ å¡ç‰‡

| æ¦‚å¿µ         | å†…å®¹                                   |
| ------------ | -------------------------------------- |
| æ„é€ å‡½æ•°     | åˆ›å»ºå¯¹è±¡æ—¶æ‰§è¡Œï¼Œç”¨æ¥åˆå§‹åŒ–å±æ€§         |
| é»˜è®¤æ„é€ å‡½æ•° | æ— å‚æ•°ã€ç©ºå®ç°ï¼Œç”± Dart è‡ªåŠ¨æä¾›       |
| è‡ªåŠ¨è°ƒç”¨     | æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶è‡ªåŠ¨è¿è¡Œ                 |
| è¢«æ›¿æ¢       | ä¸€æ—¦ä½ å†™äº†è‡ªå·±çš„æ„é€ å‡½æ•°ï¼Œé»˜è®¤çš„å°±æ¶ˆå¤± |

# ğŸ’¯ğŸ’¯ğŸ’¯ è¯­æ³•ç³–æ„é€ å‡½æ•°ï¼ˆthisï¼‰

éå¸¸å¥½ ğŸ‘
ä½ ç°åœ¨å­¦ä¹ åˆ°äº† Dart æ„é€ å‡½æ•°ä¸­æœ€å¸¸ç”¨ã€æœ€ç®€æ´çš„ä¸€ç§å½¢å¼ï¼š

> ğŸ¬ **è¯­æ³•ç³–æ„é€ å‡½æ•°ï¼ˆthis æ„é€ å‡½æ•°ï¼‰**

å®ƒæ˜¯æ‰€æœ‰ Dart ç¨‹åºå‘˜éƒ½ä¼šç”¨çš„å†™æ³•ï¼Œéå¸¸é«˜æ•ˆã€ç®€æ´ã€‚
æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥è®²æ¸…æ¥šå®ƒçš„æ¦‚å¿µã€è¯­æ³•ã€åŸç†ã€æ³¨æ„ç‚¹å’Œä½¿ç”¨åœºæ™¯ã€‚

---

## ğŸ§­ ä¸€ã€ä»€ä¹ˆæ˜¯è¯­æ³•ç³–æ„é€ å‡½æ•°ï¼Ÿ

**è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰** æŒ‡çš„æ˜¯ä¸€ç§è®©ä»£ç å†™èµ·æ¥æ›´æ–¹ä¾¿çš„è¯­æ³•å½¢å¼ã€‚

åœ¨ Dart ä¸­ï¼Œè¯­æ³•ç³–æ„é€ å‡½æ•°å°±æ˜¯ï¼š

> ä½¿ç”¨ `this.xxx` çš„å½¢å¼æ¥ **ç›´æ¥å°†å‚æ•°èµ‹å€¼ç»™ç±»çš„åŒåå±æ€§**ã€‚

---

## ğŸ§© äºŒã€æ™®é€šå†™æ³• vs è¯­æ³•ç³–å†™æ³•

å…ˆçœ‹ã€Œæ™®é€šæ„é€ å‡½æ•°ã€å†™æ³•ï¼š

```dart
class Person {
  String name;
  int age;

  Person(String name, int age) {
    this.name = name;
    this.age = age;
  }
}
```

âš™ï¸ è¿™æ®µä»£ç å®Œå…¨åˆæ³•ï¼Œä½†æœ‰æ˜æ˜¾çš„é‡å¤ï¼š

* å‚æ•°åå’Œå±æ€§åé‡å¤ã€‚
* `this.name = name` æ˜¾å¾—å•°å—¦ã€‚

---

### âœ… ä½¿ç”¨è¯­æ³•ç³–å

æˆ‘ä»¬å¯ä»¥ç®€åŒ–ä¸ºï¼š

```dart
class Person {
  String name;
  int age;

  Person(this.name, this.age);
}
```

ğŸ§  å«ä¹‰ç›¸åŒï¼
Dart è‡ªåŠ¨å¸®ä½ æŠŠæ„é€ å‚æ•°å’Œç±»å±æ€§â€œç»‘å®šâ€åœ¨ä¸€èµ·ã€‚

---

## ğŸ§ª ä¸‰ã€å®Œæ•´ç¤ºä¾‹

```dart
class Person {
  String name;
  int age;

  // ä½¿ç”¨è¯­æ³•ç³–æ„é€ å‡½æ•°
  Person(this.name, this.age);

  void sayHello() {
    print('ä½ å¥½ï¼Œæˆ‘æ˜¯$nameï¼Œä»Šå¹´$ageå²');
  }
}

void main() {
  var p = Person('å°æ˜', 18); // åˆ›å»ºå¯¹è±¡æ—¶ç›´æ¥ä¼ å€¼
  p.sayHello();
}
```

è¾“å‡ºï¼š

```
ä½ å¥½ï¼Œæˆ‘æ˜¯å°æ˜ï¼Œä»Šå¹´18å²
```

---

## ğŸ§  å››ã€è¯­æ³•ç³–æ„é€ å‡½æ•°çš„ç‰¹ç‚¹

| ç‰¹ç‚¹       | è¯´æ˜                    |
| -------- | --------------------- |
| ç®€æ´       | ä¸ç”¨å†™ `this.xxx = xxx;` |
| è‡ªåŠ¨èµ‹å€¼     | Dart è‡ªåŠ¨æŠŠæ„é€ å‚æ•°èµ‹å€¼ç»™åŒåå±æ€§   |
| æ”¯æŒå¤šä¸ªå‚æ•°   | å¯ä»¥å†™ä»»æ„æ•°é‡çš„ `this.xxx`   |
| åªä½œç”¨åœ¨åŒåå±æ€§ | å‚æ•°åå¿…é¡»å’Œå±æ€§åç›¸åŒ           |
| å¯ä»¥æ··åˆæ™®é€šå‚æ•° | è¯­æ³•ç³–å‚æ•°å’Œæ™®é€šå‚æ•°å¯ä»¥å…±å­˜        |

---

## ğŸ§® äº”ã€å¯ä»¥æ··åˆä½¿ç”¨

ä½ å¯ä»¥åœ¨è¯­æ³•ç³–å‚æ•°ä¹‹å¤–ï¼ŒåŠ æ™®é€šå‚æ•°é€»è¾‘ï¼š

```dart
class Student {
  String name;
  int age;
  String grade;

  Student(this.name, this.age, [this.grade = 'æœªçŸ¥']);
}

void main() {
  var s1 = Student('å°çº¢', 16);
  var s2 = Student('å°äº®', 17, 'é«˜ä¸€');

  print('${s1.name} - ${s1.grade}');
  print('${s2.name} - ${s2.grade}');
}
```

è¾“å‡ºï¼š

```
å°çº¢ - æœªçŸ¥
å°äº® - é«˜ä¸€
```

âœ… Dart è¯­æ³•ç³–ä¸å¯é€‰å‚æ•° (`[]`ã€`{}`) ä¹Ÿèƒ½æ­é…ä½¿ç”¨ã€‚

---

## ğŸ’¡ å…­ã€ä¸å‘½åå‚æ•°ç»“åˆä½¿ç”¨ï¼ˆæ›´å¸¸è§ï¼‰

Dart å¸¸ç”¨çš„æ„é€ å‡½æ•°å†™æ³•æ˜¯**å‘½åå‚æ•° + è¯­æ³•ç³–**çš„ç»„åˆï¼š

```dart
class User {
  String name;
  int age;

  User({this.name = 'æœªå‘½å', this.age = 0});
}

void main() {
  var u1 = User(); // ä½¿ç”¨é»˜è®¤å€¼
  var u2 = User(name: 'å°è“', age: 22);

  print('${u1.name} - ${u1.age}');
  print('${u2.name} - ${u2.age}');
}
```

è¾“å‡ºï¼š

```
æœªå‘½å - 0
å°è“ - 22
```

âœ… **è¿™ç§å†™æ³•åœ¨ Flutter ä¸­æå…¶å¸¸è§**ï¼ˆä¾‹å¦‚ï¼š`Text(this.text, {this.style})`ï¼‰ã€‚

---

## âš ï¸ ä¸ƒã€è¯­æ³•ç³–æ„é€ å‡½æ•°çš„é™åˆ¶

| é™åˆ¶             | è¯´æ˜                                |
| -------------- | --------------------------------- |
| å‚æ•°åå¿…é¡»å’Œå±æ€§åç›¸åŒ    | å¦åˆ™æ— æ³•è‡ªåŠ¨èµ‹å€¼                          |
| ä¸èƒ½åŒ…å«é¢å¤–é€»è¾‘       | åªèƒ½åšèµ‹å€¼ï¼Œä¸èƒ½åšè®¡ç®—                       |
| è‹¥æœ‰å¤æ‚é€»è¾‘éœ€ç”¨æ™®é€šæ„é€ å‡½æ•° | æ¯”å¦‚ï¼š`age = a > 0 ? a : 0` å¿…é¡»å†™æˆæ™®é€šå½¢å¼ |

ä¾‹å¦‚ï¼š

```dart
// âŒ é”™è¯¯å†™æ³•ï¼šè¯­æ³•ç³–ä¸èƒ½åšåˆ¤æ–­
Person(this.name, this.age > 0 ? this.age : 0);

// âœ… æ­£ç¡®å†™æ³•ï¼š
Person(String name, int age) {
  this.name = name;
  this.age = age > 0 ? age : 0;
}
```

---

## ğŸ§­ å…«ã€å°ç»“è¡¨æ ¼

| åˆ†ç±»   | æ™®é€šæ„é€ å‡½æ•°            | è¯­æ³•ç³–æ„é€ å‡½æ•°     |
| ---- | ----------------- | ----------- |
| å†™æ³•   | `this.xxx = xxx;` | `this.xxx`  |
| ç®€æ´æ€§  | å•°å—¦                | âœ… ç®€æ´        |
| é€»è¾‘æ”¯æŒ | å¯å†™åˆ¤æ–­ã€è¿ç®—ç­‰          | âŒ ä»…èµ‹å€¼       |
| æ¨èåœºæ™¯ | éœ€è¦å¤æ‚åˆå§‹åŒ–é€»è¾‘æ—¶        | âœ… æ™®é€šå¯¹è±¡èµ‹å€¼åˆå§‹åŒ– |

---

## ğŸ§± ä¹ã€ç»ƒä¹ å»ºè®®

1. âœï¸ å†™ä¸€ä¸ª `Car` ç±»ï¼Œå±æ€§ `brand`ã€`price`ï¼Œç”¨è¯­æ³•ç³–æ„é€ å‡½æ•°åˆå§‹åŒ–ã€‚
2. âœï¸ å†™ä¸€ä¸ª `Book` ç±»ï¼Œç”¨å‘½åå‚æ•°è¯­æ³•ç³–æ„é€ å‡½æ•°ï¼š

   ```dart
   class Book {
     String title;
     double price;
     Book({this.title = 'æœªå‘½å', this.price = 0});
   }
   ```

# ğŸ’¯ğŸ’¯ğŸ’¯ å‘½åæ„é€ å‡½æ•°

éå¸¸æ£’ ğŸ‘
ä½ ç°åœ¨å­¦ä¹ åˆ° Dart æ„é€ å‡½æ•°çš„ä¸‹ä¸€æ­¥ â€”â€” **å‘½åæ„é€ å‡½æ•°ï¼ˆNamed Constructorï¼‰**ã€‚
è¿™ä¸€éƒ¨åˆ†éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒæ˜¯ Dart ä¸­å®ç°ã€Œå¤šç§ä¸åŒåˆ›å»ºå¯¹è±¡æ–¹å¼ã€çš„å…³é”®ã€‚
æˆ‘ä»¬åªè®²æœ€æœ€åŸºç¡€çš„æ ¸å¿ƒçŸ¥è¯† + ç»å…¸æ˜“æ‡‚çš„ä»£ç ã€‚

---

## ğŸ§­ ä¸€ã€å‘½åæ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

> å‘½åæ„é€ å‡½æ•°ï¼ˆNamed Constructorï¼‰å°±æ˜¯ä¸€ç§ **â€œæœ‰åå­—çš„æ„é€ å‡½æ•°â€**ï¼Œ
> ç”¨æ¥åœ¨ä¸€ä¸ªç±»é‡Œå®šä¹‰**å¤šä¸ªä¸åŒçš„æ„é€ æ–¹å¼**ã€‚

ğŸ‘‰ Dart å…è®¸ä¸€ä¸ªç±»ä¸­æœ‰å¤šä¸ªæ„é€ å‡½æ•°ï¼Œä½†æ¯ä¸ªè¦æœ‰ä¸åŒçš„â€œåå­—â€ã€‚

---

## ğŸ§© äºŒã€ä¸ºä»€ä¹ˆè¦ç”¨å‘½åæ„é€ å‡½æ•°ï¼Ÿ

æœ‰æ—¶æˆ‘ä»¬å¸Œæœ›åŒä¸€ä¸ªç±»èƒ½ç”¨ä¸åŒæ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œæ¯”å¦‚ï¼š

* ä»æ™®é€šå‚æ•°åˆ›å»ºå¯¹è±¡
* ä» JSON æ•°æ®åˆ›å»ºå¯¹è±¡
* åˆ›å»ºä¸€ä¸ªé»˜è®¤ç©ºå¯¹è±¡

å‘½åæ„é€ å‡½æ•°å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

---

## ğŸ§± ä¸‰ã€å‘½åæ„é€ å‡½æ•°çš„è¯­æ³•

```dart
class ç±»å {
  ç±»å.æ„é€ å‡½æ•°å(å‚æ•°åˆ—è¡¨) {
    // æ„é€ é€»è¾‘
  }
}
```

> âœ… æ³¨æ„ï¼š
>
> * åå­—å†™åœ¨ç±»ååé¢ï¼Œç”¨ `.` è¿æ¥ï¼›
> * å¯ä»¥å®šä¹‰å¤šä¸ªå‘½åæ„é€ å‡½æ•°ã€‚

---

## ğŸ“˜ å››ã€æœ€æœ€ç»å…¸çš„ç¤ºä¾‹ï¼š`fromJson`

```dart
class Person {
  String name;
  int age;

  // æ™®é€šæ„é€ å‡½æ•°
  Person(this.name, this.age);

  // å‘½åæ„é€ å‡½æ•°ï¼šä» Map åˆ›å»ºå¯¹è±¡
  Person.fromJson(Map<String, dynamic> json)
      : name = json['name'],
        age = json['age'];
}

void main() {
  // æ™®é€šæ–¹å¼åˆ›å»º
  var p1 = Person('å°æ˜', 18);

  // ä» JSONï¼ˆMapï¼‰åˆ›å»º
  var p2 = Person.fromJson({'name': 'å°çº¢', 'age': 20});

  print('${p1.name} - ${p1.age}');
  print('${p2.name} - ${p2.age}');
}
```

ğŸ§  è¾“å‡ºï¼š

```
å°æ˜ - 18
å°çº¢ - 20
```

âœ… **çŸ¥è¯†ç‚¹ï¼š**

* `Person.fromJson` æ˜¯å‘½åæ„é€ å‡½æ•°ã€‚
* ç”¨ `:` åˆå§‹åŒ–å±æ€§ï¼ˆè¿™å«â€œåˆå§‹åŒ–åˆ—è¡¨â€ï¼‰ã€‚
* è¿™æ ·å¯ä»¥åˆ›å»ºâ€œä¸åŒæ¥æºâ€çš„å¯¹è±¡ã€‚

---

## ğŸ§© äº”ã€ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªå‘½åæ„é€ å‡½æ•°

```dart
class Point {
  int x;
  int y;

  Point(this.x, this.y); // æ™®é€šæ„é€ å‡½æ•°

  // å‘½åæ„é€ å‡½æ•°ï¼šåŸç‚¹
  Point.origin()
      : x = 0,
        y = 0;

  // å‘½åæ„é€ å‡½æ•°ï¼šä»å­—ç¬¦ä¸²åˆ›å»º
  Point.fromString(String s)
      : x = int.parse(s.split(',')[0]),
        y = int.parse(s.split(',')[1]);
}

void main() {
  var p1 = Point(3, 4);
  var p2 = Point.origin();
  var p3 = Point.fromString('5,6');

  print('p1: (${p1.x}, ${p1.y})');
  print('p2: (${p2.x}, ${p2.y})');
  print('p3: (${p3.x}, ${p3.y})');
}
```

è¾“å‡ºï¼š

```
p1: (3, 4)
p2: (0, 0)
p3: (5, 6)
```

âœ… **çŸ¥è¯†ç‚¹ï¼š**

* ä¸€ä¸ªç±»å¯ä»¥æœ‰å¤šä¸ªå‘½åæ„é€ å‡½æ•°ã€‚
* æ¯ä¸ªå‘½åæ„é€ å‡½æ•°å¯ä»¥æœ‰ä¸åŒé€»è¾‘ã€‚

---

## âš™ï¸ å…­ã€å‘½åæ„é€ å‡½æ•°çš„å…¸å‹ä½¿ç”¨åœºæ™¯

| åœºæ™¯         | ä¾‹å­                                | è¯´æ˜            |
| ---------- | --------------------------------- | ------------- |
| ä» Map åˆ›å»ºå¯¹è±¡ | `Person.fromJson()`               | å¸¸ç”¨äºè§£æ JSON æ•°æ® |
| åˆ›å»ºé»˜è®¤å¯¹è±¡     | `User.empty()`                    | æä¾›ç©ºå¯¹è±¡çš„ä¾¿æ·æ–¹å¼    |
| ä¸åŒåˆå§‹åŒ–æ–¹å¼    | `Point.origin()`ã€`Point.random()` | åŒºåˆ†ä¸åŒæ¥æºæˆ–ç”¨é€”     |
| å·¥å‚æ¨¡å¼å‰ç½®     | ä¸ `factory` ç»“åˆå®ç°å•ä¾‹æˆ–ç¼“å­˜             | è¿›é˜¶ç”¨æ³•          |

---

## ğŸ’¡ ä¸ƒã€ç®€å•ç©ºå¯¹è±¡ç¤ºä¾‹

```dart
class User {
  String name;
  int age;

  User(this.name, this.age);

  // ç©ºå¯¹è±¡
  User.empty()
      : name = 'æœªçŸ¥',
        age = 0;
}

void main() {
  var u1 = User('å°æ', 25);
  var u2 = User.empty();

  print('${u1.name} - ${u1.age}');
  print('${u2.name} - ${u2.age}');
}
```

è¾“å‡ºï¼š

```
å°æ - 25
æœªçŸ¥ - 0
```

---

## ğŸ§  å…«ã€å°ç»“è¡¨æ ¼

| çŸ¥è¯†ç‚¹   | å†…å®¹                                   |
| ----- | ------------------------------------ |
| å®šä¹‰æ–¹å¼  | `ClassName.name()`                   |
| åŠŸèƒ½    | æä¾›å¤šç§åˆå§‹åŒ–æ–¹å¼                            |
| å¯å®šä¹‰å¤šä¸ª | âœ… å¯ä»¥åœ¨ä¸€ä¸ªç±»ä¸­å®šä¹‰å¤šä¸ª                        |
| å¸¸è§å‘½å  | `.fromJson()`ã€`.empty()`ã€`.origin()` |
| å¸¸é…åˆä½¿ç”¨ | åˆå§‹åŒ–åˆ—è¡¨ï¼ˆ`:`ï¼‰å’Œ `factory`                |
| æ˜¯å¦å¿…é¡»æœ‰ | âŒ å¯é€‰ï¼ŒæŒ‰éœ€æ·»åŠ                             |

---

## ğŸ§± ä¹ã€ç»å…¸ç»ƒä¹ ï¼ˆå»ºè®®åŠ¨æ‰‹å†™ï¼‰

1ï¸âƒ£ åˆ›å»ºä¸€ä¸ª `Car` ç±»

* å±æ€§ï¼š`brand`ã€`price`
* å†™ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼š

  * `Car(this.brand, this.price)`
  * `Car.empty()` â†’ `brand = 'æœªçŸ¥'`, `price = 0`

2ï¸âƒ£ åˆ›å»ºä¸€ä¸ª `Student` ç±»

* å±æ€§ï¼š`name`, `age`
* å‘½åæ„é€ å‡½æ•° `Student.fromMap(Map data)` â†’ ä» Map åˆå§‹åŒ–å±æ€§ã€‚



# ğŸ’¯ğŸ’¯ğŸ’¯ åˆå§‹åŒ–åˆ—è¡¨

éå¸¸å¥½ï¼ğŸ‘
å­¦ä¹ å®Œ Dart çš„å‘½åæ„é€ å‡½æ•°ï¼Œæ¥ä¸‹æ¥ä½ å¿…é¡»æŒæ¡çš„å°±æ˜¯ â€”â€”
â­ **åˆå§‹åŒ–åˆ—è¡¨ï¼ˆInitializer Listï¼‰**ã€‚

è¿™æ˜¯ Dart æ„é€ å‡½æ•°é‡Œéå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªåŸºç¡€è¯­æ³•ï¼Œ
å‡ ä¹æ¯ä¸ªé¢å‘å¯¹è±¡çš„ Dart ç¨‹åºéƒ½ä¼šç”¨åˆ°ã€‚

---

## ğŸ§­ ä¸€ã€åˆå§‹åŒ–åˆ—è¡¨æ˜¯ä»€ä¹ˆï¼Ÿ

> åˆå§‹åŒ–åˆ—è¡¨æ˜¯åœ¨ **æ„é€ å‡½æ•°ä½“ï¼ˆ`{}`ï¼‰æ‰§è¡Œä¹‹å‰**ï¼Œ
> ç”¨æ¥ç»™ **å®ä¾‹å˜é‡èµ‹åˆå€¼** çš„ä¸€ä¸ªåœ°æ–¹ã€‚

ğŸ“˜ è¯­æ³•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š

```dart
ClassName(å‚æ•°)
    : å±æ€§1 = è¡¨è¾¾å¼1,
      å±æ€§2 = è¡¨è¾¾å¼2 {
  // æ„é€ å‡½æ•°ä½“
}
```

ä½ å¯ä»¥ç†è§£ä¸ºï¼š

> Dart åœ¨â€œæ­£å¼æ‰§è¡Œæ„é€ å‡½æ•°ä½“ä¹‹å‰â€ï¼Œ
> ä¼šå…ˆè¿è¡Œå†’å· `:` åé¢çš„åˆå§‹åŒ–ä»£ç ã€‚

---

## ğŸ§© äºŒã€ä¸ºä»€ä¹ˆè¦æœ‰åˆå§‹åŒ–åˆ—è¡¨ï¼Ÿ

æœ‰ä¸¤ä¸ªä¸»è¦åŸå› ï¼š

1ï¸âƒ£ **æœ‰äº›å±æ€§å¿…é¡»åœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±ç¡®å®š**ï¼ˆæ¯”å¦‚ `final` å±æ€§ï¼‰ã€‚
2ï¸âƒ£ **æ¯”åœ¨æ„é€ å‡½æ•°ä½“ä¸­èµ‹å€¼æ›´é«˜æ•ˆ**ã€‚

ä¾‹å¦‚ï¼š

```dart
class Person {
  final String name;

  // âŒ é”™è¯¯å†™æ³•
  // Person(String n) {
  //   name = n; // final å˜é‡ä¸èƒ½åœ¨è¿™é‡Œèµ‹å€¼
  // }

  // âœ… æ­£ç¡®å†™æ³•ï¼šç”¨åˆå§‹åŒ–åˆ—è¡¨
  Person(String n) : name = n;
}
```

---

## ğŸ“˜ ä¸‰ã€æœ€æœ€ç»å…¸çš„ä¾‹å­

```dart
class Point {
  int x;
  int y;

  // åˆå§‹åŒ–åˆ—è¡¨ï¼šåœ¨æ„é€ ä½“æ‰§è¡Œå‰å°±ç»™å±æ€§èµ‹å€¼
  Point(int a, int b)
      : x = a,
        y = b {
    print('æ„é€ å‡½æ•°ä½“æ‰§è¡Œ');
  }
}

void main() {
  var p = Point(3, 4);
  print('x = ${p.x}, y = ${p.y}');
}
```

ğŸ§  è¾“å‡ºï¼š

```
æ„é€ å‡½æ•°ä½“æ‰§è¡Œ
x = 3, y = 4
```

âœ… **çŸ¥è¯†ç‚¹ï¼š**

* `: x = a, y = b` æ˜¯åˆå§‹åŒ–åˆ—è¡¨ï¼›
* èµ‹å€¼åœ¨æ„é€ ä½“ `{}` æ‰§è¡Œä¹‹å‰ï¼›
* é€šå¸¸ç”¨äºåˆå§‹åŒ– `final` æˆ– `const` å±æ€§ã€‚

---

## ğŸ’¡ å››ã€ç»“åˆå‘½åæ„é€ å‡½æ•°çš„ç»å…¸ä¾‹å­

```dart
class Person {
  final String name;
  final int age;

  // å‘½åæ„é€ å‡½æ•° + åˆå§‹åŒ–åˆ—è¡¨
  Person.fromJson(Map<String, dynamic> json)
      : name = json['name'],
        age = json['age'] {
    print('Person.fromJson æ„é€ å®Œæˆ');
  }
}

void main() {
  var p = Person.fromJson({'name': 'å°çº¢', 'age': 20});
  print('${p.name}, ${p.age}');
}
```

ğŸ§  è¾“å‡ºï¼š

```
Person.fromJson æ„é€ å®Œæˆ
å°çº¢, 20
```

âœ… **çŸ¥è¯†ç‚¹æ€»ç»“ï¼š**

* åˆå§‹åŒ–åˆ—è¡¨æ‰§è¡Œé¡ºåºåœ¨æ„é€ å‡½æ•°ä½“ä¹‹å‰ï¼›
* å¸¸ç”¨äºå‘½åæ„é€ å‡½æ•°ï¼›
* è®© `final` å­—æ®µåœ¨å¯¹è±¡åˆ›å»ºæ—¶å°±è·å¾—å€¼ã€‚

---

## âš™ï¸ äº”ã€å¯ä»¥åšç®€å•è®¡ç®—æˆ–è°ƒç”¨å‡½æ•°

åˆå§‹åŒ–åˆ—è¡¨ä¸ä»…èƒ½ç›´æ¥èµ‹å€¼ï¼Œä¹Ÿèƒ½åšç®€å•è¿ç®—ï¼š

```dart
class Rectangle {
  final int width;
  final int height;
  final int area;

  Rectangle(this.width, this.height)
      : area = width * height; // å¯ä»¥è®¡ç®—
}

void main() {
  var rect = Rectangle(3, 5);
  print('é¢ç§¯: ${rect.area}');
}
```

è¾“å‡ºï¼š

```
é¢ç§¯: 15
```

âœ… **è¯´æ˜ï¼š**

* å¯ä»¥åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­ä½¿ç”¨ä¼ å…¥å‚æ•°ï¼›
* é€‚åˆåšè®¡ç®—å‹åˆå§‹åŒ–ã€‚

---

## ğŸ§± å…­ã€åˆå§‹åŒ–åˆ—è¡¨ + `super`ï¼ˆè¿›é˜¶ä¸€ç‚¹ç‚¹ï¼‰

å½“ä½ çš„ç±»æœ‰ç»§æ‰¿æ—¶ï¼Œåˆå§‹åŒ–åˆ—è¡¨è¿˜èƒ½**è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°**ã€‚

```dart
class Animal {
  final String name;
  Animal(this.name);
}

class Dog extends Animal {
  final int age;

  // è°ƒç”¨çˆ¶ç±»æ„é€  + åˆå§‹åŒ–è‡ªå·±çš„å­—æ®µ
  Dog(String name, this.age) : super(name);
}

void main() {
  var d = Dog('å°é»‘', 3);
  print('${d.name}, ${d.age}');
}
```

è¾“å‡ºï¼š

```
å°é»‘, 3
```

âœ… **å…³é”®ç‚¹ï¼š**

* `super(name)` ä¹Ÿæ˜¯åœ¨åˆå§‹åŒ–åˆ—è¡¨é˜¶æ®µè°ƒç”¨ï¼›
* å…ˆåˆå§‹åŒ–çˆ¶ç±»ï¼Œå†æ‰§è¡Œå­ç±»æ„é€ å‡½æ•°ä½“ã€‚

---

## ğŸ§© ä¸ƒã€å°ç»“è¡¨æ ¼

| çŸ¥è¯†ç‚¹  | å†…å®¹                                        |
| ---- | ----------------------------------------- |
| è¯­æ³•   | `ClassName(å‚æ•°) : å±æ€§ = è¡¨è¾¾å¼, å±æ€§2 = è¡¨è¾¾å¼2 {}` |
| æ‰§è¡Œé¡ºåº | å…ˆæ‰§è¡Œåˆå§‹åŒ–åˆ—è¡¨ï¼Œå†æ‰§è¡Œæ„é€ å‡½æ•°ä½“                         |
| ä½œç”¨   | æå‰ç»™å±æ€§èµ‹å€¼ï¼Œå°¤å…¶æ˜¯ `final` å±æ€§                    |
| å¯åšçš„äº‹ | ç›´æ¥èµ‹å€¼ã€è®¡ç®—ã€è°ƒç”¨çˆ¶ç±»æ„é€                             |
| å¸¸è§æ­é… | å‘½åæ„é€ å‡½æ•°ã€`super()`ã€`final` å­—æ®µ               |

---

## ğŸ’ª å…«ã€ç»ƒä¹ å»ºè®®

è¯·è‡ªå·±åŠ¨æ‰‹å†™ä¸€å†™ä¸‹é¢ä¸¤é¢˜ï¼ˆéå¸¸é€‚åˆå…¥é—¨ï¼‰ï¼š

**1ï¸âƒ£ é¢˜ç›®ï¼š**
å†™ä¸€ä¸ª `User` ç±»ï¼ŒåŒ…å«ï¼š

* `final String name`
* `final int age`
* ç”¨åˆå§‹åŒ–åˆ—è¡¨æ¥ç»™å±æ€§èµ‹å€¼ã€‚

**2ï¸âƒ£ é¢˜ç›®ï¼š**
å†™ä¸€ä¸ª `Circle` ç±»ï¼ŒåŒ…å«ï¼š

* `final double radius`
* `final double area`
* ç”¨åˆå§‹åŒ–åˆ—è¡¨è®¡ç®—åœ†é¢ç§¯ï¼š`area = 3.14 * radius * radius`

---

è¦ä¸è¦æˆ‘å¸®ä½ æ¥ç€è®²ä¸‹ä¸€ä¸ªæœ€å¸¸æ­é…çš„çŸ¥è¯†ç‚¹ï¼š
ğŸ‘‰ **`factory` æ„é€ å‡½æ•°ï¼ˆå·¥å‚æ„é€ å‡½æ•°ï¼‰**ï¼Ÿ
å®ƒç»å¸¸å’Œåˆå§‹åŒ–åˆ—è¡¨ã€å‘½åæ„é€ å‡½æ•°ä¸€èµ·å‡ºç°ã€‚


# ğŸ’¯ğŸ’¯ğŸ’¯ å¸¸é‡æ„é€ å‡½æ•°

éå¸¸å¥½ ğŸ‘
ä½ å·²ç»å­¦åˆ° Dart æ„é€ å‡½æ•°çš„ä¸€ä¸ªéå¸¸é‡è¦çš„è¿›é˜¶åŸºç¡€ï¼š
â­ **å¸¸é‡æ„é€ å‡½æ•°ï¼ˆ`const` constructorï¼‰**ã€‚

è¿™ä¸ªçŸ¥è¯†ç‚¹å…¶å®éå¸¸ç®€å•ï¼Œä½†éå¸¸å…³é”®ï¼Œ
å°¤å…¶åœ¨ Flutter å¼€å‘ä¸­ä½ ä¼š**å¤©å¤©è§åˆ°**å®ƒï¼ˆæ¯”å¦‚ `const Text('Hi')`ï¼‰ã€‚

---

## ğŸ§­ ä¸€ã€å¸¸é‡æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

> **å¸¸é‡æ„é€ å‡½æ•°ï¼ˆ`const` constructorï¼‰** æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ„é€ å‡½æ•°ï¼Œ
> å®ƒç”¨æ¥åˆ›å»º **ç¼–è¯‘æ—¶å°±ç¡®å®šä¸å˜çš„å¯¹è±¡**ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼š

* å¯¹è±¡åœ¨ç¨‹åºè¿è¡Œå‰å°±å·²ç»ç¡®å®šäº†ï¼›
* å®ƒåœ¨å†…å­˜ä¸­æ˜¯å”¯ä¸€ä¸”ä¸å¯å˜çš„ï¼›
* æ‰€ä»¥èƒ½æé«˜æ€§èƒ½ã€èŠ‚çœå†…å­˜ã€‚

---

## ğŸ§© äºŒã€è¯­æ³•è§„åˆ™ï¼ˆéå¸¸ç®€å•ï¼‰

å®šä¹‰å¸¸é‡æ„é€ å‡½æ•°çš„è¯­æ³•ï¼š

```dart
class ç±»å {
  final ç±»å‹ å±æ€§;
  const ç±»å(this.å±æ€§);
}
```

ğŸ“˜ é‡ç‚¹è§„åˆ™ï¼š

1. æ„é€ å‡½æ•°å‰å¿…é¡»åŠ  `const`ï¼›
2. ç±»ä¸­æ‰€æœ‰å±æ€§å¿…é¡»æ˜¯ `final`ï¼›
3. åˆ›å»ºå¯¹è±¡æ—¶ç”¨ `const` è°ƒç”¨ã€‚

---

## âœ… ä¸‰ã€æœ€æœ€åŸºç¡€çš„ä¾‹å­

```dart
class Point {
  final int x;
  final int y;

  // å¸¸é‡æ„é€ å‡½æ•°
  const Point(this.x, this.y);
}

void main() {
  const p1 = Point(3, 4);
  const p2 = Point(3, 4);

  print(identical(p1, p2)); // è¾“å‡ºï¼štrue
}
```

ğŸ§  è®²è§£ï¼š

* `const Point(this.x, this.y)` è¡¨ç¤ºè¿™ä¸ªç±»çš„å¯¹è±¡å¯ä»¥æ˜¯ç¼–è¯‘æœŸå¸¸é‡ï¼›
* `p1` å’Œ `p2` å®é™…ä¸Šæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼ˆå› ä¸ºå†…å®¹ç›¸åŒä¸”éƒ½æ˜¯å¸¸é‡ï¼‰ï¼›
* Dart ä¼šåœ¨ç¼–è¯‘æœŸå°±åˆ›å»ºå¥½è¿™ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶æŒ‡å‘åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚

è¾“å‡ºï¼š

```
true
```

---

## ğŸ§  å››ã€ä¸ºä»€ä¹ˆè¦ç”¨å¸¸é‡æ„é€ å‡½æ•°ï¼Ÿ

| åŸå›             | è¯´æ˜                                          |
| ------------- | ------------------------------------------- |
| ğŸš€ æé«˜æ€§èƒ½       | å¯¹è±¡åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šï¼Œè¿è¡Œæ—¶æ— éœ€é‡æ–°åˆ›å»º                         |
| ğŸ§© èŠ‚çœå†…å­˜       | ç›¸åŒçš„å¸¸é‡å¯¹è±¡ä¼šå¤ç”¨ï¼ˆåŒä¸€ä¸ªå†…å­˜åœ°å€ï¼‰                         |
| ğŸ”’ ä¸å¯å˜        | æ‰€æœ‰å±æ€§éƒ½æ˜¯ `final`ï¼Œå¯¹è±¡å†…å®¹ä¸ä¼šè¢«ä¿®æ”¹                    |
| ğŸ’¡ Flutterä¸­å¸¸è§ | ä¾‹å¦‚ï¼š`const Text('Hello')`ã€`const SizedBox()` |

---

## âš™ï¸ äº”ã€æ™®é€šæ„é€ å‡½æ•° vs å¸¸é‡æ„é€ å‡½æ•°

| ç±»å‹     | å†™æ³•                            | åˆ›å»ºæ—¶æœº | æ˜¯å¦å”¯ä¸€ | æ˜¯å¦å¯å˜              |
| ------ | ----------------------------- | ---- | ---- | ----------------- |
| æ™®é€šæ„é€ å‡½æ•° | `Point(this.x, this.y)`       | è¿è¡Œæ—¶  | å¦    | å¯ä»¥æœ‰å¯å˜å±æ€§           |
| å¸¸é‡æ„é€ å‡½æ•° | `const Point(this.x, this.y)` | ç¼–è¯‘æ—¶  | æ˜¯    | ä¸å¯å˜ï¼Œå±æ€§å¿…é¡»æ˜¯ `final` |

---

## ğŸ’¡ å…­ã€ç»“åˆå‘½åæ„é€ å‡½æ•°çš„ä¾‹å­

```dart
class Color {
  final int red;
  final int green;
  final int blue;

  // å¸¸é‡æ„é€ å‡½æ•°
  const Color(this.red, this.green, this.blue);

  // å‘½åå¸¸é‡æ„é€ å‡½æ•°
  const Color.black() : this(0, 0, 0);
}

void main() {
  const c1 = Color(255, 255, 255);
  const c2 = Color.black();

  print('ç™½è‰²: ${c1.red},${c1.green},${c1.blue}');
  print('é»‘è‰²: ${c2.red},${c2.green},${c2.blue}');
}
```

è¾“å‡ºï¼š

```
ç™½è‰²: 255,255,255
é»‘è‰²: 0,0,0
```

âœ… **çŸ¥è¯†ç‚¹æ€»ç»“ï¼š**

* å‘½åæ„é€ å‡½æ•°ä¹Ÿèƒ½æ˜¯ `const`ï¼›
* ä»ç„¶è¦æ±‚æ‰€æœ‰å±æ€§éƒ½æ˜¯ `final`ï¼›
* å¯ä»¥åœ¨åˆå§‹åŒ–åˆ—è¡¨ä¸­èµ‹å¸¸é‡å€¼ã€‚

---

## ğŸ§± ä¸ƒã€ä½ ä¹Ÿå¯ä»¥ç”¨â€œnewâ€å’Œâ€œconstâ€çš„åŒºåˆ«çœ‹çœ‹æ•ˆæœ

```dart
class Point {
  final int x;
  final int y;
  const Point(this.x, this.y);
}

void main() {
  var a = const Point(1, 2);
  var b = const Point(1, 2);
  var c = Point(1, 2); // æ²¡æœ‰ const

  print(identical(a, b)); // trueï¼ˆåŒä¸€ä¸ªå¯¹è±¡ï¼‰
  print(identical(a, c)); // falseï¼ˆè¿è¡Œæ—¶æ–°å»ºçš„å¯¹è±¡ï¼‰
}
```

è¾“å‡ºï¼š

```
true
false
```

âœ… è¯´æ˜ï¼š

* `const` åˆ›å»ºçš„æ˜¯â€œç¼–è¯‘æœŸå¸¸é‡â€ï¼Œå¯¹è±¡å”¯ä¸€ï¼›
* æ™®é€šçš„ `Point(1,2)` æ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ã€‚

---

## ğŸ¯ å…«ã€å°ç»“è¡¨æ ¼

| çŸ¥è¯†ç‚¹  | å†…å®¹                      |
| ---- | ----------------------- |
| å…³é”®å­—  | `const`                 |
| å±æ€§è¦æ±‚ | å¿…é¡»å…¨æ˜¯ `final`            |
| åˆ›å»ºå¯¹è±¡ | `const å¯¹è±¡å = ç±»å(å‚æ•°)`    |
| å¯¹è±¡ç‰¹æ€§ | ç¼–è¯‘æœŸå›ºå®šã€å”¯ä¸€ã€ä¸å¯å˜            |
| åº”ç”¨åœºæ™¯ | Flutter UIã€å›ºå®šé…ç½®ã€é¢œè‰²ã€åæ ‡ç‚¹ç­‰ |

---

## ğŸ’ª ä¹ã€ç»ƒä¹ é¢˜ï¼ˆé€‚åˆå…¥é—¨å·©å›ºï¼‰

**é¢˜ç›® 1ï¼š**
åˆ›å»ºä¸€ä¸ª `User` ç±»ï¼š

* åŒ…å« `final String name`ï¼›
* æä¾›ä¸€ä¸ª `const` æ„é€ å‡½æ•°ï¼›
* åˆ›å»ºä¸¤ä¸ªç›¸åŒçš„ `const User`ï¼Œå¹¶æ¯”è¾ƒå®ƒä»¬æ˜¯å¦ç›¸ç­‰ã€‚

**é¢˜ç›® 2ï¼š**
åˆ›å»ºä¸€ä¸ª `const Circle` ç±»ï¼š

* åŒ…å« `final double radius`ï¼›
* æä¾› `const` æ„é€ å‡½æ•°ï¼›
* åœ¨ `main()` ä¸­åˆ›å»ºä¸¤ä¸ªç›¸åŒåŠå¾„çš„ `const` å¯¹è±¡ï¼Œçœ‹æ˜¯å¦ç›¸åŒã€‚

---

æ˜¯å¦å¸Œæœ›æˆ‘ä¸‹ä¸€æ­¥å¸®ä½ è®² ğŸ‘‰ **factoryï¼ˆå·¥å‚æ„é€ å‡½æ•°ï¼‰**ï¼Ÿ
å®ƒæ˜¯ Dart æ„é€ å‡½æ•°ä½“ç³»ä¸­æœ€åä¸€ä¸ªé‡è¦ç±»å‹ï¼Œè€Œä¸”éå¸¸å¸¸ç”¨äº **å•ä¾‹æ¨¡å¼** å’Œ **ç¼“å­˜å¯¹è±¡åˆ›å»º**ã€‚


# ğŸ’¯ğŸ’¯ğŸ’¯ å·¥å‚æ„é€ å‡½æ•°

å¤ªå¥½äº† ğŸ‘
ä½ ç°åœ¨å·²ç»æŠŠ Dart çš„æ„é€ å‡½æ•°ä½“ç³»å­¦åˆ°äº†æœ€åä¸€å—åŸºç¡€æ‹¼å›¾ï¼š
â­ **å·¥å‚æ„é€ å‡½æ•°ï¼ˆ`factory constructor`ï¼‰**ã€‚

åˆ«æ‹…å¿ƒï¼Œå®ƒå…¶å®ä¸€ç‚¹ä¹Ÿä¸éš¾ï¼
æˆ‘ä»¬æ¥ç”¨æœ€ç®€å•çš„è¯­è¨€ + æœ€ç»å…¸çš„ä¾‹å­è®²æ¸…æ¥šã€‚

---

## ğŸ§­ ä¸€ã€å·¥å‚æ„é€ å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿ

> **å·¥å‚æ„é€ å‡½æ•°ï¼ˆ`factory`ï¼‰** ä¸æ˜¯æ¯æ¬¡éƒ½â€œæ–°å»ºâ€ä¸€ä¸ªå¯¹è±¡ï¼Œ
> è€Œæ˜¯å¯ä»¥ **æ§åˆ¶å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹** â€”â€”
> ç”šè‡³å¯ä»¥ **è¿”å›ä¸€ä¸ªå·²å­˜åœ¨çš„å¯¹è±¡**ã€**è¿”å›å­ç±»å¯¹è±¡** æˆ– **ç¼“å­˜å¯¹è±¡**ã€‚

ğŸ§  ç®€å•ç†è§£ï¼š

> æ™®é€šæ„é€ å‡½æ•° = æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡
> å·¥å‚æ„é€ å‡½æ•° = å¯ä»¥é€‰æ‹©â€œè¿”å›æ—§çš„â€ æˆ– â€œæ§åˆ¶æ€ä¹ˆåˆ›å»ºâ€

---

## ğŸ§© äºŒã€åŸºç¡€è¯­æ³•

```dart
class ç±»å {
  factory ç±»å(å‚æ•°) {
    // å¯ä»¥å†³å®šè¿”å›ä»€ä¹ˆ
    return å¯¹è±¡;
  }
}
```

ğŸ“˜ è¦ç‚¹ï¼š

* å…³é”®å­— `factory` å†™åœ¨æ„é€ å‡½æ•°å‰ï¼›
* å·¥å‚æ„é€ å‡½æ•° **æ²¡æœ‰åˆå§‹åŒ–åˆ—è¡¨**ï¼›
* é€šå¸¸ä¼šç”¨ `return` è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼›
* è¿™ä¸ªå¯¹è±¡å¯ä»¥æ˜¯ï¼š

  * æ–°å»ºçš„å®ä¾‹ï¼›
  * å·²ç»å­˜åœ¨çš„å®ä¾‹ï¼›
  * ç”šè‡³æ˜¯åˆ«çš„ç±»çš„å®ä¾‹ã€‚

---

## âœ… ä¸‰ã€æœ€æœ€ç»å…¸ä¾‹å­ï¼šæ§åˆ¶å•ä¾‹ï¼ˆåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼‰

```dart
class Database {
  // ç§æœ‰é™æ€å®ä¾‹
  static final Database _instance = Database._internal();

  // ç§æœ‰å‘½åæ„é€ å‡½æ•°
  Database._internal();

  // å·¥å‚æ„é€ å‡½æ•°
  factory Database() {
    return _instance;
  }
}

void main() {
  var db1 = Database();
  var db2 = Database();

  print(identical(db1, db2)); // true
}
```

ğŸ§  è®²è§£ï¼š

* `_internal()` æ˜¯ä¸€ä¸ª**ç§æœ‰å‘½åæ„é€ å‡½æ•°**ï¼›
* å·¥å‚æ„é€ å‡½æ•° `Database()` ä¸ç›´æ¥åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œæ˜¯è¿”å› `_instance`ï¼›
* æ‰€ä»¥æ•´ä¸ªç¨‹åºä¸­ **åªæœ‰ä¸€ä¸ª Database å®ä¾‹**ã€‚

ğŸ“ è¾“å‡ºï¼š

```
true
```

âœ… **ç»“è®ºï¼š**
è¿™æ˜¯ **å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰** çš„æ ‡å‡†å®ç°ã€‚
ä½ åœ¨ Flutterã€æœåŠ¡ç«¯å¼€å‘ä¸­éƒ½ä¼šç»å¸¸ç”¨å®ƒã€‚

---

## ğŸ§± å››ã€å¯¹æ¯”æ™®é€šæ„é€ å‡½æ•°

| ç‰¹æ€§               | æ™®é€šæ„é€ å‡½æ•°  | å·¥å‚æ„é€ å‡½æ•°      |
| ---------------- | ------- | ----------- |
| æ˜¯å¦è‡ªåŠ¨æ–°å»ºå¯¹è±¡         | âœ… æ¯æ¬¡éƒ½æ–°å»º | âŒ å¯é€‰ï¼šå¯å¤ç”¨æ—§å¯¹è±¡ |
| æ˜¯å¦èƒ½è¿”å›åˆ«çš„å¯¹è±¡        | âŒ ä¸è¡Œ    | âœ… å¯ä»¥è¿”å›ä»»æ„å¯¹è±¡  |
| æ˜¯å¦æœ‰åˆå§‹åŒ–åˆ—è¡¨         | âœ… æœ‰     | âŒ æ²¡æœ‰        |
| æ˜¯å¦ç”¨ `this` åˆå§‹åŒ–å±æ€§ | âœ… å¯ä»¥    | âŒ ä¸è¡Œï¼ˆéœ€æ‰‹åŠ¨èµ‹å€¼ï¼‰ |

---

## ğŸ’¡ äº”ã€å¦ä¸€ä¸ªç®€å•ä¾‹å­ï¼šç¼“å­˜å¯¹è±¡

```dart
class Student {
  final String name;

  // ç¼“å­˜æ‰€æœ‰åˆ›å»ºçš„ Student
  static final Map<String, Student> _cache = {};

  // ç§æœ‰æ„é€ å‡½æ•°
  Student._internal(this.name);

  // å·¥å‚æ„é€ å‡½æ•°ï¼šå¦‚æœå·²æœ‰ç¼“å­˜ï¼Œå°±å¤ç”¨
  factory Student(String name) {
    if (_cache.containsKey(name)) {
      return _cache[name]!;
    } else {
      final newStudent = Student._internal(name);
      _cache[name] = newStudent;
      return newStudent;
    }
  }
}

void main() {
  var s1 = Student('Alice');
  var s2 = Student('Alice');
  var s3 = Student('Bob');

  print(identical(s1, s2)); // true
  print(identical(s1, s3)); // false
}
```

ğŸ§  è¯´æ˜ï¼š

* ç›¸åŒ `name` çš„å­¦ç”Ÿåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼›
* `factory` æ„é€ å‡½æ•°ä¼šå…ˆæŸ¥ç¼“å­˜ï¼Œå†å†³å®šæ˜¯å¦åˆ›å»ºï¼›
* å®ç°äº†ä¸€ä¸ªâ€œ**å¯¹è±¡æ± ï¼ˆObject Poolï¼‰**â€çš„æ•ˆæœã€‚

---

## ğŸ§© å…­ã€å·¥å‚æ„é€ å‡½æ•°ä¹Ÿèƒ½è¿”å›ä¸åŒçš„å­ç±»å¯¹è±¡ï¼ˆäº†è§£ï¼‰

```dart
abstract class Shape {
  factory Shape(String type) {
    if (type == 'circle') return Circle();
    if (type == 'square') return Square();
    throw 'Unknown shape';
  }
}

class Circle implements Shape {}
class Square implements Shape {}

void main() {
  var shape = Shape('circle');
  print(shape.runtimeType); // Circle
}
```

ğŸ§  è¯´æ˜ï¼š

* å·¥å‚æ„é€ å‡½æ•°å¯ä»¥è¿”å›**ä¸åŒç±»å‹çš„å¯¹è±¡**ï¼›
* è¿™é‡Œçš„ `Shape()` è¿”å›äº† `Circle` æˆ– `Square`ï¼›
* å¾ˆå¸¸ç”¨äºå·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰ã€‚

---

## ğŸ“˜ ä¸ƒã€å°ç»“è¡¨æ ¼

| çŸ¥è¯†ç‚¹       | å†…å®¹                         |
| --------- | -------------------------- |
| å…³é”®å­—       | `factory`                  |
| æ˜¯å¦æ¯æ¬¡éƒ½æ–°å»ºå¯¹è±¡ | âŒ å¯ä»¥é€‰æ‹©å¤ç”¨æ—§å¯¹è±¡                |
| èƒ½å¦è¿”å›åˆ«çš„å¯¹è±¡  | âœ… å¯ä»¥                       |
| æœ‰æ— åˆå§‹åŒ–åˆ—è¡¨   | âŒ æ²¡æœ‰                       |
| å…¸å‹ç”¨é€”      | å•ä¾‹æ¨¡å¼ã€ç¼“å­˜å¯¹è±¡ã€å·¥å‚æ¨¡å¼             |
| æ³¨æ„ç‚¹       | ä¸èƒ½ç”¨ `this.x = ...` åˆå§‹åŒ–å®ä¾‹å˜é‡ |

---

## ğŸ’ª å…«ã€ç»ƒä¹ é¢˜ï¼ˆæ¨èï¼‰

**é¢˜ç›® 1ï¼š**
å†™ä¸€ä¸ª `Config` ç±»ï¼š

* ç”¨ `factory` æ„é€ å‡½æ•°å®ç°å•ä¾‹ï¼›
* æ¯æ¬¡ `Config()` è¿”å›åŒä¸€ä¸ªå¯¹è±¡ã€‚

**é¢˜ç›® 2ï¼š**
å†™ä¸€ä¸ª `Logger` ç±»ï¼š

* å¦‚æœæ—¥å¿—åç›¸åŒï¼Œå°±å¤ç”¨æ—§å¯¹è±¡ï¼›
* å¦‚æœä¸åŒï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡ï¼›
* ç”¨ Map å®ç°ç¼“å­˜æœºåˆ¶ã€‚

