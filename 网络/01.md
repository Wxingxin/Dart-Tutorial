éå¸¸æ£’ ğŸ‘ ä½ å·²ç»å­¦åˆ° **Dart ç½‘ç»œç¼–ç¨‹** è¿™ä¸€æ ¸å¿ƒèƒ½åŠ›éƒ¨åˆ†äº†ã€‚
è¿™åœ¨åš **åç«¯æœåŠ¡ï¼ˆå¦‚ Dart + Shelfï¼‰** æˆ– **Flutter å®æ—¶é€šä¿¡** æ—¶éƒ½éå¸¸æœ‰ç”¨ã€‚

æˆ‘ä¸‹é¢ä¼šç”¨ **ç®€å• + ç»å…¸çš„æ¡ˆä¾‹**ï¼Œåˆ†åˆ«è®²è§£ Dart çš„
âœ… TCP æœåŠ¡ç«¯ / å®¢æˆ·ç«¯
âœ… UDP æœåŠ¡ç«¯ / å®¢æˆ·ç«¯
âœ… HTTP æœåŠ¡å™¨ä¸è¯·æ±‚
âœ… WebSocket

æ¯ä¸ªæ¡ˆä¾‹éƒ½èƒ½**ç‹¬ç«‹è¿è¡Œ**ï¼Œåªéœ€ä¿å­˜ä¸º `.dart` æ–‡ä»¶åæ‰§è¡Œå³å¯ã€‚

---

# ğŸ§± ä¸€ã€TCP ç½‘ç»œç¼–ç¨‹

Dart ä¸­ä½¿ç”¨ `dart:io` åº“æ¥è¿›è¡Œ TCP é€šä¿¡ã€‚
å®ƒå…è®¸åˆ›å»ºåº•å±‚çš„ **Socketï¼ˆå¥—æ¥å­—ï¼‰** è¿æ¥ï¼Œå®ç°æŒä¹…çš„ç‚¹å¯¹ç‚¹é€šä¿¡ã€‚

---

## ğŸ–¥ï¸ TCP æœåŠ¡ç«¯ï¼ˆServerï¼‰

```dart
// tcp_server.dart
import 'dart:io';

void main() async {
  // å¯åŠ¨ä¸€ä¸ª TCP æœåŠ¡å™¨
  final server = await ServerSocket.bind(InternetAddress.anyIPv4, 8080);
  print('âœ… TCP æœåŠ¡å™¨å·²å¯åŠ¨ï¼Œç›‘å¬ç«¯å£: 8080');

  // ç›‘å¬å®¢æˆ·ç«¯è¿æ¥
  await for (Socket client in server) {
    print('ğŸ“¡ å®¢æˆ·ç«¯å·²è¿æ¥: ${client.remoteAddress.address}:${client.remotePort}');

    // ç›‘å¬å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯
    client.listen((data) {
      final message = String.fromCharCodes(data);
      print('ğŸ’¬ æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯: $message');
      client.write('æœåŠ¡å™¨å·²æ”¶åˆ°: $message');
    }, onDone: () {
      print('âŒ å®¢æˆ·ç«¯æ–­å¼€è¿æ¥');
      client.close();
    });
  }
}
```

---

## ğŸ’» TCP å®¢æˆ·ç«¯ï¼ˆClientï¼‰

```dart
// tcp_client.dart
import 'dart:io';
import 'dart:convert';

void main() async {
  // è¿æ¥ TCP æœåŠ¡å™¨
  final socket = await Socket.connect('127.0.0.1', 8080);
  print('âœ… å·²è¿æ¥æœåŠ¡å™¨: ${socket.remoteAddress.address}:${socket.remotePort}');

  // å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯
  socket.write('Hello, Server!');

  // ç›‘å¬æœåŠ¡å™¨çš„å›å¤
  socket.listen((data) {
    print('ğŸ“© æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯: ${utf8.decode(data)}');
  });

  // å»¶æ—¶å…³é—­
  await Future.delayed(Duration(seconds: 3));
  socket.close();
}
```

è¿è¡Œæ­¥éª¤ï¼š

```bash
dart tcp_server.dart   # å…ˆè¿è¡ŒæœåŠ¡å™¨
dart tcp_client.dart   # å†è¿è¡Œå®¢æˆ·ç«¯
```

---

# ğŸ›°ï¸ äºŒã€UDP ç½‘ç»œç¼–ç¨‹

UDP æ˜¯æ— è¿æ¥çš„ï¼Œé€Ÿåº¦å¿«ä½†ä¸ä¿è¯ä¼ è¾“å¯é ã€‚
éå¸¸é€‚åˆåšå±€åŸŸç½‘å¹¿æ’­ã€æ¸¸æˆåŒæ­¥ã€ç‰©è”ç½‘æ¶ˆæ¯ã€‚

---

## ğŸ–¥ï¸ UDP æœåŠ¡ç«¯

```dart
// udp_server.dart
import 'dart:io';
import 'dart:convert';

void main() async {
  final server = await RawDatagramSocket.bind(InternetAddress.anyIPv4, 8081);
  print('âœ… UDP æœåŠ¡å™¨å¯åŠ¨åœ¨ç«¯å£ 8081');

  server.listen((event) {
    if (event == RawSocketEvent.read) {
      final datagram = server.receive();
      if (datagram != null) {
        final message = utf8.decode(datagram.data);
        print('ğŸ’¬ æ”¶åˆ°: $message');
        server.send(utf8.encode('æœåŠ¡å™¨å·²æ”¶åˆ°: $message'), datagram.address, datagram.port);
      }
    }
  });
}
```

---

## ğŸ’» UDP å®¢æˆ·ç«¯

```dart
// udp_client.dart
import 'dart:io';
import 'dart:convert';

void main() async {
  final socket = await RawDatagramSocket.bind(InternetAddress.anyIPv4, 0);
  final serverAddress = InternetAddress('127.0.0.1');

  print('âœ… UDP å®¢æˆ·ç«¯å·²å¯åŠ¨');

  socket.send(utf8.encode('Hello UDP Server!'), serverAddress, 8081);

  socket.listen((event) {
    if (event == RawSocketEvent.read) {
      final datagram = socket.receive();
      if (datagram != null) {
        print('ğŸ“© æ”¶åˆ°æœåŠ¡å™¨å›å¤: ${utf8.decode(datagram.data)}');
      }
    }
  });
}
```

---

# ğŸŒ ä¸‰ã€HTTP æœåŠ¡å™¨ä¸è¯·æ±‚

HTTP æ˜¯æœ€å¸¸ç”¨çš„ Web é€šä¿¡æ–¹å¼ã€‚

---

## ğŸ–¥ï¸ HTTP æœåŠ¡å™¨

```dart
// http_server.dart
import 'dart:io';

void main() async {
  final server = await HttpServer.bind(InternetAddress.anyIPv4, 8082);
  print('âœ… HTTP æœåŠ¡å™¨å¯åŠ¨åœ¨ http://localhost:8082');

  await for (HttpRequest request in server) {
    print('ğŸ“© æ”¶åˆ°è¯·æ±‚: ${request.method} ${request.uri.path}');

    // è¿”å›å“åº”
    request.response
      ..statusCode = 200
      ..headers.contentType = ContentType.html
      ..write('<h1>Hello from Dart HTTP Server!</h1>')
      ..close();
  }
}
```

---

## ğŸ’» HTTP å®¢æˆ·ç«¯è¯·æ±‚

```dart
// http_client.dart
import 'dart:io';

void main() async {
  final url = Uri.parse('http://localhost:8082');
  final client = HttpClient();

  final request = await client.getUrl(url);
  final response = await request.close();

  print('âœ… å“åº”çŠ¶æ€ç : ${response.statusCode}');
  print('ğŸ“„ å“åº”å†…å®¹:');
  await response.transform(SystemEncoding().decoder).forEach(print);
}
```

---

# ğŸ”„ å››ã€WebSocket å®æ—¶é€šä¿¡

WebSocket æ”¯æŒåŒå‘å®æ—¶é€šä¿¡ï¼Œå¸¸ç”¨äºèŠå¤©å®¤ã€å®æ—¶æ¸¸æˆã€è‚¡ç¥¨è¡Œæƒ…ç­‰ã€‚

---

## ğŸ–¥ï¸ WebSocket æœåŠ¡å™¨

```dart
// websocket_server.dart
import 'dart:io';

void main() async {
  final server = await HttpServer.bind('localhost', 8083);
  print('âœ… WebSocket æœåŠ¡å™¨å¯åŠ¨åœ¨ ws://localhost:8083');

  await for (HttpRequest request in server) {
    if (WebSocketTransformer.isUpgradeRequest(request)) {
      final socket = await WebSocketTransformer.upgrade(request);
      print('ğŸ“¡ å®¢æˆ·ç«¯è¿æ¥æˆåŠŸ');

      socket.listen((message) {
        print('ğŸ’¬ æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯: $message');
        socket.add('æœåŠ¡å™¨å›å¤: $message');
      }, onDone: () {
        print('âŒ å®¢æˆ·ç«¯æ–­å¼€è¿æ¥');
      });
    } else {
      request.response
        ..statusCode = HttpStatus.forbidden
        ..close();
    }
  }
}
```

---

## ğŸ’» WebSocket å®¢æˆ·ç«¯

```dart
// websocket_client.dart
import 'dart:io';

void main() async {
  final socket = await WebSocket.connect('ws://localhost:8083');
  print('âœ… å·²è¿æ¥ WebSocket æœåŠ¡å™¨');

  socket.add('Hello from Client!');

  socket.listen((message) {
    print('ğŸ“© æ”¶åˆ°æœåŠ¡å™¨å›å¤: $message');
  });

  await Future.delayed(Duration(seconds: 3));
  socket.close();
}
```

---

# ğŸ§  äº”ã€æ€»ç»“å¯¹æ¯”

| ç±»å‹            | ç‰¹ç‚¹          | ä½¿ç”¨åœºæ™¯         |
| ------------- | ----------- | ------------ |
| **TCP**       | é¢å‘è¿æ¥ï¼Œå¯é ä¼ è¾“   | èŠå¤©ã€æ–‡ä»¶ä¼ è¾“      |
| **UDP**       | æ— è¿æ¥ï¼Œé€Ÿåº¦å¿«ä½†ä¸å¯é  | æ¸¸æˆã€å¹¿æ’­ã€å®æ—¶ä¼ æ„Ÿæ•°æ® |
| **HTTP**      | è¯·æ±‚-å“åº”æ¨¡å‹     | ç½‘é¡µã€API æ¥å£    |
| **WebSocket** | å…¨åŒå·¥å®æ—¶é€šä¿¡     | èŠå¤©å®¤ã€å®æ—¶æ¨é€     |

---

æ˜¯å¦å¸Œæœ›æˆ‘æ¥ç€å¸®ä½ å†™ä¸€ä¸ª
ğŸ’¬ **â€œåŸºäº WebSocket çš„å®æ—¶èŠå¤©å®¤ Demoï¼ˆå¸¦ Flutter å‰ç«¯ + Dart æœåŠ¡ç«¯ï¼‰â€**ï¼Ÿ
è¿™ä¸ªæ¡ˆä¾‹éå¸¸ç»å…¸ï¼Œä¼šå¸®ä½ å½»åº•æŒæ¡ Dart å¼‚æ­¥ + ç½‘ç»œé€šä¿¡ã€‚
